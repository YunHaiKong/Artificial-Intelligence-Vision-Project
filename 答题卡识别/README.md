# 答题卡自动批改系统

## 项目概述

本项目实现了一个完整的答题卡自动批改系统，基于OpenCV计算机视觉技术，能够自动识别答题卡上的选择题答案并进行批改。系统通过图像处理和计算机视觉算法，实现了从原始答题卡图像到最终批改结果的完整流程。

## 功能特点

- **自动化批改**：自动识别答题卡上的选择题答案
- **高精度识别**：基于轮廓检测和像素统计的准确识别算法
- **可视化过程**：每个处理步骤都有图像输出，便于调试和理解
- **完整流程**：从图像预处理到最终批改结果的完整解决方案

## 技术实现流程

### 1. 图像预处理
- 读取原始答题卡图像
- 灰度化处理
- 高斯模糊去噪
- 边缘检测

### 2. 轮廓检测与透视变换
- 检测答题卡的外轮廓
- 通过透视变换矫正图像
- 获取标准化的答题卡图像

### 3. 二值化处理
- 对矫正后的图像进行阈值分割
- 突出选项圆圈
- 准备后续的轮廓检测

### 4. 选项识别
- 检测并筛选出25个选项圆圈的轮廓
- 对选项进行编号和排序
- 建立选项位置映射

### 5. 答案判定
- 通过像素统计判断学生的选择答案
- 计算每个选项圆圈内的非零像素数量
- 确定学生选择的选项

### 6. 自动批改
- 与标准答案对比
- 生成批改结果
- 可视化显示批改结果

## 文件结构

```
答题卡识别/
├── 答题卡识别.ipynb          # 主程序Jupyter Notebook
├── 答题卡识别.html           # HTML导出版本
├── 答题卡识别.pdf            # 项目报告
├── 结果流程图.pptx           # 流程图演示
├── origin.png               # 原始答题卡图像
├── step1_original.png       # 步骤1：原始图像
├── step2_gray.png           # 步骤2：灰度化
├── step3_blurred.png        # 步骤3：高斯模糊
├── step4_edged.png          # 步骤4：边缘检测
├── step5_contour.png        # 步骤5：轮廓检测
├── step6_warped.png         # 步骤6：透视变换
├── step6_warped_gray.png    # 步骤6：灰度透视变换
├── step7_thresh.png         # 步骤7：二值化
├── step8_all_contours.png   # 步骤8：所有轮廓
├── step9_filtered_contours.png # 步骤9：筛选轮廓
├── step10_numbered_contours.png # 步骤10：编号轮廓
├── step11_result_img.png    # 步骤11：最终结果
└── 1.png                    # 测试图像
```

## 环境要求

### 必备依赖
```bash
pip install opencv-python
pip install numpy
pip install matplotlib
pip install jupyter
```

### 推荐版本
- Python 3.7+
- OpenCV 4.5+
- NumPy 1.19+
- Matplotlib 3.3+

## 使用方法

### 运行方式

1. **Jupyter Notebook方式：**
   ```bash
   jupyter notebook
   # 打开 答题卡识别.ipynb 文件
   ```

2. **直接运行：**
   - 在Jupyter环境中运行所有代码单元格
   - 系统会自动处理答题卡图像并显示结果

### 处理流程

1. **图像加载**：系统自动加载测试图像
2. **预处理**：自动进行灰度化、模糊、边缘检测
3. **轮廓检测**：识别答题卡外轮廓并进行透视变换
4. **选项识别**：检测25个选项圆圈
5. **答案判定**：统计像素判断学生选择
6. **结果展示**：显示批改结果和可视化图像

## 核心算法

### 轮廓检测算法
- 使用OpenCV的findContours函数
- 基于边缘检测结果
- 筛选最大轮廓作为答题卡区域

### 透视变换算法
- 使用getPerspectiveTransform和warpPerspective
- 将倾斜的答题卡矫正为标准矩形

### 选项识别算法
- 基于轮廓面积和形状筛选
- 对选项进行排序和编号

### 答案判定算法
- 统计每个选项圆圈内的非零像素
- 选择像素数量最多的选项作为学生答案

## 项目亮点

1. **完整的处理流程**：从原始图像到最终结果的完整解决方案
2. **详细的步骤展示**：每个处理步骤都有对应的图像输出
3. **高精度识别**：基于多步骤的精确识别算法
4. **可视化调试**：便于理解和调试的完整可视化流程

## 扩展应用

- 可扩展支持不同类型的答题卡格式
- 可集成到在线考试系统中
- 可支持批量处理多张答题卡
- 可添加成绩统计和分析功能


## 许可证

本项目仅用于学习和教育目的。